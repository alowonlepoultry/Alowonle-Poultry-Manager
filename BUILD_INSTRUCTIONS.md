# Build Instructions for Alowonle Poultry Manager

## ðŸŽ¯ For Non-Technical Users
**See [FLUTLAB_GUIDE.md](FLUTLAB_GUIDE.md)** - Simple step-by-step guide with NO technical knowledge needed!

---

## For Developers / Technical Users

This document is for developers who want to build locally or set up CI/CD.

### Prerequisites

- Flutter SDK (3.24+ recommended)
- Dart SDK (3.9+, comes with Flutter)
- Android SDK (for Android builds)
- Xcode (for iOS builds on macOS)

## Build Steps

### 1. Clone the Repository

```bash
git clone <repository-url>
cd Alowonle-Poultry-Manager
```

### 2. Install Dependencies

```bash
flutter pub get
```

### 3. Code Generation (Already Done!)

**Note:** All generated files (*.g.dart) are already included in the repository.  
You can build immediately without running build_runner!

If you need to regenerate (only after code changes):

```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

### 4. Build the App

#### For Android APK:
```bash
flutter build apk --release
```

#### For Android App Bundle (AAB):
```bash
flutter build appbundle --release
```

#### For iOS:
```bash
flutter build ios --release
```

#### For Web:
```bash
flutter build web --release
```

## Using FlutLab.io

1. Connect your GitHub repository to FlutLab.io
2. FlutLab will automatically detect the Flutter project
3. **Important**: Before building, run the code generation command in the FlutLab terminal:
   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```
4. Then build your APK/AAB using the FlutLab build options

## CI/CD Configuration

### GitHub Actions Example

Create `.github/workflows/build.yml`:

```yaml
name: Build Flutter App

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  build-android:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.24.0'
          channel: 'stable'
      
      - name: Install dependencies
        run: flutter pub get
      
      - name: Generate code
        run: flutter pub run build_runner build --delete-conflicting-outputs
      
      - name: Build APK
        run: flutter build apk --release
      
      - name: Build AAB
        run: flutter build appbundle --release
      
      - name: Upload APK
        uses: actions/upload-artifact@v3
        with:
          name: release-apk
          path: build/app/outputs/flutter-apk/app-release.apk
      
      - name: Upload AAB
        uses: actions/upload-artifact@v3
        with:
          name: release-aab
          path: build/app/outputs/bundle/release/app-release.aab
```

## Generated Files

The following files are generated by `build_runner` and are **NOT** included in the repository:
- `*.g.dart` - Generated Dart files (Hive, Riverpod, etc.)
- `*.freezed.dart` - Freezed immutable classes
- `*.gr.dart` - Go Router routes

These files must be regenerated before building the app.

## Troubleshooting

### Issue: "No file or variants found for asset"
**Solution**: Run `flutter pub get` to ensure all assets are properly registered.

### Issue: "The getter 'xxx' isn't defined"
**Solution**: Run the code generation command:
```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

### Issue: "Gradle build failed"
**Solution**: 
1. Check that you have the Android SDK installed
2. Update Gradle if needed
3. Ensure Java 11 or higher is installed

### Issue: Build fails on FlutLab
**Solution**: Make sure to run the code generation command in the FlutLab terminal before building.

## App Signing (For Production)

To release the app to Google Play Store, you need to sign it with a keystore:

1. Generate a keystore (keep this secure!):
```bash
keytool -genkey -v -keystore my-release-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias my-key-alias
```

2. Create `android/key.properties`:
```properties
storePassword=<your-store-password>
keyPassword=<your-key-password>
keyAlias=my-key-alias
storeFile=../my-release-key.jks
```

3. The `key.properties` file is already configured in `build.gradle.kts`

**Note**: Never commit the keystore file or `key.properties` to the repository!

## Clean Repository

This repository follows best practices:
- âœ… Only source code is committed
- âœ… No build artifacts
- âœ… No IDE-specific files (except essential ones)
- âœ… No generated code (must be regenerated during build)
- âœ… No local configuration files

This ensures a clean, maintainable codebase that works seamlessly with CI/CD pipelines.

## Support

For issues or questions, contact the development team.

